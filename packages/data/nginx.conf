server {
  listen 80;
  server_name _;

  location = /healthz { return 200 'ok'; add_header Content-Type text/plain; }

  root /usr/share/nginx/html;

  # JSON correct mime + short cache
  types { application/json json; }
  location ~* \.json$ {
    add_header Content-Type application/json;
    add_header Access-Control-Allow-Origin *;
    add_header Cache-Control "public, max-age=300, must-revalidate";
    try_files $uri =404;
  }

  # Manifests immutable cache
  location ^~ /manifest/ {
    add_header Access-Control-Allow-Origin *;
    add_header Cache-Control "public, max-age=31536000, immutable";
    try_files $uri =404;
  }

  # Default static
  location / {
    add_header Access-Control-Allow-Origin *;
    try_files $uri =404;
  }
}