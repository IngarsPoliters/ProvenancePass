server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # Simple health probe
  location = /healthz {
    add_header Content-Type text/plain;
    return 200 "ok";
  }

  # JSON / SIG need CORS (viewer fetch), short cache
  location ~* \.(json|sig)$ {
    add_header Access-Control-Allow-Origin * always;
    add_header Access-Control-Allow-Methods "GET, OPTIONS" always;
    add_header Access-Control-Allow-Headers "*" always;
    add_header Cache-Control "public, max-age=300, must-revalidate";
    if ($request_method = OPTIONS) { return 204; }
    try_files $uri =404;
  }

  # Optional manifests or other static
  location /manifest/ {
    add_header Access-Control-Allow-Origin * always;
    add_header Cache-Control "public, max-age=600";
    try_files $uri =404;
  }

  # Default: only serve existing files
  location / {
    try_files $uri =404;
  }
}